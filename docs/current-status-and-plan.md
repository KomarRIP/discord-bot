# –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–ª–∞–Ω –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2024
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2024-12-20
**–≠—Ç–∞–ø:** –§–∞–∑–∞ 1 (MVP) ‚Äî ~85% –∑–∞–≤–µ—Ä—à–µ–Ω–∞ (–∑–∞–≤–µ—Ä—à–µ–Ω—ã Intake –∏ Member Role Management)

## üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 2024-12-20: –ó–∞–≤–µ—Ä—à—ë–Ω Member Role Management

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- ‚úÖ **MemberRepository** (`src/infra/storage/sqlite/repositories/memberRepository.ts`)
  - –ü–æ–ª–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  - –ú–µ—Ç–æ–¥—ã: `getMemberProfile()`, `upsertMember()`, `updateMemberRank()`, `addMemberPosition()`, `removeMemberPosition()`, `addMemberClearance()`, `removeMemberClearance()`
  - –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å JSON-–º–∞—Å—Å–∏–≤–∞–º–∏ –¥–ª—è positions –∏ clearances
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `sqliteStorage.ts`

- ‚úÖ **MemberRoleManagementService** (`src/app/services/memberRoleManagementService.ts`)
  - –ü–æ–ª–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª—è–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  - –ú–µ—Ç–æ–¥—ã: `setRank()`, `addPosition()`, `removePosition()`, `grantClearance()`, `revokeClearance()`, `getMemberProfile()`
  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–æ–ª–µ–π —á–µ—Ä–µ–∑ TemplateRegistry (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ä–æ–ª–∏: rank/position/clearance)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (–º–∞–∫—Å–∏–º—É–º 1 rank, –º–∞–∫—Å–∏–º—É–º 2 positions)
  - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Discord API —á–µ—Ä–µ–∑ DiscordGateway
  - Audit log –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–≤ –ë–î –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ CH_AUDIT)

- ‚úÖ **–ö–æ–º–∞–Ω–¥—ã `/roles`** –≤ Interface Layer
  - `/roles set-rank` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–≤–∞–Ω–∏—è (—Ç—Ä–µ–±—É–µ—Ç BASE_COMMAND)
  - `/roles add-position` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ (—Ç—Ä–µ–±—É–µ—Ç BASE_STAFF –∏–ª–∏ BASE_COMMAND)
  - `/roles remove-position` ‚Äî —Å–Ω—è—Ç–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
  - `/roles grant-clearance` ‚Äî –≤—ã–¥–∞—á–∞ –¥–æ–ø—É—Å–∫–∞
  - `/roles revoke-clearance` ‚Äî –æ—Ç–∑—ã–≤ –¥–æ–ø—É—Å–∫–∞
  - `/roles profile` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–∞
  - Autocomplete –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–µ–π –∏–∑ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
  - –ü–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ `interactionRouter.ts`

- ‚úÖ **Audit Log —Å–æ–±—ã—Ç–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª—è–º–∏**
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–±—ã—Ç–∏–π: `MemberRankSet`, `MemberPositionAdded`, `MemberPositionRemoved`, `MemberClearanceGranted`, `MemberClearanceRevoked`
  - –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –∫–∞–Ω–∞–ª CH_AUDIT —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º embed'–æ–≤

### 2024-12-19: –ó–∞–≤–µ—Ä—à–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Intake —Å Discord –∫–∞–Ω–∞–ª–∞–º–∏

### –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

#### 1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Intake —Å Discord –∫–∞–Ω–∞–ª–∞–º–∏
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –∑–∞—è–≤–æ–∫ –≤ –∫–∞–Ω–∞–ª `CH_INTAKE_QUEUE` –ø—Ä–∏ –ø–æ–¥–∞—á–µ (`submitApplication`)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞—è–≤–æ–∫ –≤ –∫–∞–Ω–∞–ª–µ –ø—Ä–∏ approve/reject –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —á–µ—Ä–µ–∑ `messageKey = application:<applicationId>`
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ mapping —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ë–î –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

#### 2. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ DiscordGateway
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `sendMessage()` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —Å embeds –∏ components
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `updateMessage()` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `ensureMessageWithEmbed()` –¥–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å embeds

#### 3. Audit Log Service
- ‚úÖ –°–æ–∑–¥–∞–Ω `AuditLogService` (`src/infra/audit/auditLogService.ts`) –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π –≤ Discord –∫–∞–Ω–∞–ª
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–±—ã—Ç–∏–π: ApplicationSubmitted, ApplicationApproved, ApplicationRejected
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ embed'–æ–≤ —Å —Ü–≤–µ—Ç–∞–º–∏ –ø–æ —Ç–∏–ø—É —Å–æ–±—ã—Ç–∏—è
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `IntakeService` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π
- ‚úÖ Graceful degradation: –æ—à–∏–±–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `src/infra/audit/auditLogService.ts` ‚Äî —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ audit —Å–æ–±—ã—Ç–∏–π –≤ Discord

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `src/infra/discord/discordGateway.ts` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å embeds/components
- `src/app/services/intakeService.ts` ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ –∫–∞–Ω–∞–ª—ã –∏ audit log
- `src/interface/discord/interactionRouter.ts` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `AuditLogService`

---

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–≥–æ—Ç–æ–≤–æ)

#### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –±–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ **Storage**: SQLite —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏ (guilds, deployments, deployment_steps, discord_mappings, setup_sessions, members, applications, discipline_records, audit_events)
- ‚úÖ **ApplicationRepository**: —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞—è–≤–∫–∞–º–∏ (`applicationRepository.ts`)
- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏–∏**: —Å–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î (`migrator.ts`)
- ‚úÖ **Template Registry**: –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤ (`templateRegistry.ts`)
- ‚úÖ **Discord Gateway**: –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ä–æ–ª—è–º–∏, –∫–∞–Ω–∞–ª–∞–º–∏, –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏, –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π —É—á–∞—Å—Ç–Ω–∏–∫–∞–º (`discordGateway.ts`)
- ‚úÖ **Permission Compiler**: –∫–æ–º–ø–∏–ª—è—Ü–∏—è –ø–æ–ª–∏—Ç–∏–∫ –ø—Ä–∞–≤ –≤ Discord PermissionOverwrites (`permissionCompiler.ts`)
- ‚úÖ **Rate Limit Queue**: –æ—á–µ—Ä–µ–¥—å –¥–ª—è Discord API —Å retry/backoff (`rateLimitQueue.ts`, `semaphore.ts`)
- ‚úÖ **Logging**: —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ Pino (`logger.ts`)
- ‚úÖ **Error Handling**: —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (`appError.ts`)
- ‚úÖ **Fingerprint**: —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (`fingerprint.ts`)

#### Application Layer (Use-cases)
- ‚úÖ **SetupWizardService**: –ø–æ–ª–Ω—ã–π –º–∞—Å—Ç–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å —à–∞–≥–∞–º–∏ (template, unit_name, unit_size, intake_mode, guest_policy, preview)
- ‚úÖ **TemplateDeploymentService**: –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π –¥–µ–ø–ª–æ–π —Å preview/diff, fingerprint, –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- ‚úÖ **IntakeService**: —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∏—ë–º–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ
  - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –ø–æ–ª–µ–π
  - –ü–æ–¥–∞—á–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ (draft -> submitted)
  - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∑–∞—è–≤–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
  - –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º —Ä–æ–ª–∏ BASE_MEMBER
  - –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω—ã
  - –û—Ç–º–µ–Ω–∞ –∑–∞—è–≤–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (–º–∞–∫—Å–∏–º—É–º –æ–¥–Ω–∞ –∞–∫—Ç–∏–≤–Ω–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

#### Interface Layer (Discord)
- ‚úÖ **Interaction Router**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ü–∏–π, –≤–∫–ª—é—á–∞—è intake (`interactionRouter.ts`)
- ‚úÖ **Command Definitions**: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ `/setup`, `/deploy` –∏ `/intake` (`commandDefinitions.ts`)
- ‚úÖ **Command Registration**: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è slash-–∫–æ–º–∞–Ω–¥ (`commandRegistration.ts`)
- ‚úÖ **UI Renderers**: 
  - Setup Wizard UI (`setupWizardRenderer.ts`)
  - Deploy Preview UI (`deployPreviewRenderer.ts`)
  - Intake Application UI (`intakeRenderer.ts`)
- ‚úÖ **Custom ID**: –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ/–¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ custom ID –¥–ª—è –∫–Ω–æ–ø–æ–∫/–º–æ–¥–∞–ª–æ–∫, –≤–∫–ª—é—á–∞—è intake (`customId.ts`)
- ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π –¥–ª—è –∫–æ–º–∞–Ω–¥ (BASE_GUEST, BASE_STAFF, BASE_COMMAND)

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —à–∞–±–ª–æ–Ω—ã
- ‚úÖ **Runtime Config**: –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (`runtimeConfig.ts`)
- ‚úÖ **–®–∞–±–ª–æ–Ω SSO_RF**: –ø–æ–ª–Ω—ã–π —à–∞–±–ª–æ–Ω —Å —Ä–æ–ª—è–º–∏, –∫–∞–Ω–∞–ª–∞–º–∏, –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ (`templates/SSO_RF.json`)

#### –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫
- ‚úÖ **Entry Point**: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ (`index.ts`)
- ‚úÖ **–î–µ–ø–ª–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**: —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–æ–ª–µ–π, –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –∫–∞–Ω–∞–ª–æ–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: —Å–∏—Å—Ç–µ–º–∞ mappings –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è Discord –æ–±—ä–µ–∫—Ç–æ–≤

---

### ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è MVP)

#### Application Layer (Use-cases)

- ‚ùå **DisciplineService**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏
  - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π (`/discipline add`)
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–µ–π —É—á–∞—Å—Ç–Ω–∏–∫–∞ (`/discipline list`)
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ severity –∏ expiresAt

- ‚úÖ **MemberRoleManagementService**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
  - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–≤–∞–Ω–∏—è (`/roles set-rank`)
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π (`/roles add-position`, `/roles remove-position`)
  - ‚úÖ –í—ã–¥–∞—á–∞/–æ—Ç–∑—ã–≤ –¥–æ–ø—É—Å–∫–æ–≤ (`/roles grant-clearance`, `/roles revoke-clearance`)
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (0..1 rank, 0..2 positions, N clearances)
  - ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–∞ (`/roles profile`)

#### Infrastructure Layer
- ‚úÖ **Audit Log –≤ Discord –∫–∞–Ω–∞–ª**: –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –≤ `CH_AUDIT` ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (–¥–ª—è Intake –∏ Roles)
  - ‚úÖ –°–æ–±—ã—Ç–∏—è intake (ApplicationSubmitted, ApplicationApproved, ApplicationRejected)
  - ‚úÖ –°–æ–±—ã—Ç–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–µ–π (MemberRankSet, MemberPositionAdded, MemberPositionRemoved, MemberClearanceGranted, MemberClearanceRevoked)
  - ‚ùå –°–æ–±—ã—Ç–∏—è –¥–µ–ø–ª–æ—è (–æ–∂–∏–¥–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
  - ‚ùå –°–æ–±—ã—Ç–∏—è discipline (–æ–∂–∏–¥–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Discipline)

#### Interface Layer
- ‚úÖ **–ü—É–±–ª–∏–∫–∞—Ü–∏—è –∑–∞—è–≤–æ–∫ –≤ –∫–∞–Ω–∞–ª CH_INTAKE_QUEUE**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –∑–∞—è–≤–æ–∫ –≤ –∫–∞–Ω–∞–ª –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

- ‚ùå **–ö–æ–º–∞–Ω–¥—ã Discipline**:
  - `/discipline add @user <note|warning> <severity 1..5> <reason> [expiresAt]`
  - `/discipline list @user [limit]`

- ‚úÖ **–ö–æ–º–∞–Ω–¥—ã Roles**: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
  - ‚úÖ `/roles set-rank @user <rank|none>` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞/—Å–Ω—è—Ç–∏–µ –∑–≤–∞–Ω–∏—è (BASE_COMMAND)
  - ‚úÖ `/roles add-position @user <position>` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ (BASE_STAFF/BASE_COMMAND)
  - ‚úÖ `/roles remove-position @user <position>` ‚Äî —Å–Ω—è—Ç–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
  - ‚úÖ `/roles grant-clearance @user <clearance>` ‚Äî –≤—ã–¥–∞—á–∞ –¥–æ–ø—É—Å–∫–∞
  - ‚úÖ `/roles revoke-clearance @user <clearance>` ‚Äî –æ—Ç–∑—ã–≤ –¥–æ–ø—É—Å–∫–∞
  - ‚úÖ `/roles profile @user` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–∞

- ‚ùå **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Deploy**:
  - `/deploy diagnose` ‚Äî –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π
  - `/deploy repair` ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

- ‚ùå **UI –¥–ª—è Intake**:
  - –ö–Ω–æ–ø–∫–∏ approve/reject –≤ –∫–∞–Ω–∞–ª–µ `CH_INTAKE_QUEUE`
  - –≠–º–±–µ–¥—ã –¥–ª—è –∑–∞—è–≤–æ–∫
  - –°—Ç–∞—Ç—É—Å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

- ‚ùå **UI –¥–ª—è Discipline**:
  - –≠–º–±–µ–¥—ã –¥–ª—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
  - –ò—Å—Ç–æ—Ä–∏—è —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ severity

- ‚ùå **UI –¥–ª—è Roles**:
  - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–µ–π
  - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

#### Domain Layer
- ‚ùå **–ü–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–º–∞–Ω–¥–∞–º**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–æ–ª–µ–π Discord
  - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥ intake/discipline/roles
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π `BASE_STAFF`, `BASE_COMMAND`, `BASE_GUEST`, etc.

- ‚ùå **–í–∞–ª–∏–¥–∞—Ü–∏—è –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤**:
  - Rank: –º–∞–∫—Å–∏–º—É–º 1 —Ä–æ–ª—å rank —É —É—á–∞—Å—Ç–Ω–∏–∫–∞
  - Position: –º–∞–∫—Å–∏–º—É–º 2 —Ä–æ–ª–∏ position —É —É—á–∞—Å—Ç–Ω–∏–∫–∞ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
  - Clearance: –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ, –Ω–æ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π rank)

#### Storage Repositories
- ‚úÖ **MemberRepository**: –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª—è–º–∏ ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
  - ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Å —Ä–æ–ª—è–º–∏
  - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ rank/positions/clearances —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
  - ‚úÖ –í—Å–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª—è–º–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

---

## üéØ –ü–ª–∞–Ω –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫)

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è:** –ó–∞–≤–µ—Ä—à–∏—Ç—å MVP —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏. –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏.

---

### –≠—Ç–∞–ø 1: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ Intake (–ü—Ä–∏—ë–º–Ω–∞—è) ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô ‚ö†Ô∏è –ß–ê–°–¢–ò–ß–ù–û

**–°—Ç–∞—Ç—É—Å:** –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, –æ—Å—Ç–∞–ª–∏—Å—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏.

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫ –Ω–∞ –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ –∏ –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫—É.

#### 1.1. IntakeService (Application Layer) ‚úÖ
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `createApplication()`: —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `listApplications()`: –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞—è–≤–æ–∫ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `approveApplication()`: —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º —Ä–æ–ª–∏ `BASE_MEMBER`
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `rejectApplication()`: –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω—ã
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `cancelApplication()`: –æ—Ç–º–µ–Ω–∞ –∑–∞—è–≤–∫–∏ –∞–≤—Ç–æ—Ä–æ–º
- [x] –î–æ–±–∞–≤–∏—Ç—å –∞—É–¥–∏—Ç —Å–æ–±—ã—Ç–∏–π –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–≤ –ë–î)

#### 1.2. –ö–æ–º–∞–Ω–¥—ã Intake (Interface Layer) ‚úÖ
- [x] –î–æ–±–∞–≤–∏—Ç—å `/intake apply` —Å –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º (–∏–º—è, –≤–æ–∑—Ä–∞—Å—Ç, –æ–ø—ã—Ç, –º–æ—Ç–∏–≤–∞—Ü–∏—è)
- [x] –î–æ–±–∞–≤–∏—Ç—å `/intake list` —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º (draft, submitted, under_review)
- [x] –î–æ–±–∞–≤–∏—Ç—å `/intake approve <applicationId> [reason]`
- [x] –î–æ–±–∞–≤–∏—Ç—å `/intake reject <applicationId> <reason>`
- [x] –î–æ–±–∞–≤–∏—Ç—å `/intake cancel`
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `interactionRouter.ts`

#### 1.3. UI –¥–ª—è Intake ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- [x] –°–æ–∑–¥–∞—Ç—å `intakeRenderer.ts`: —ç–º–±–µ–¥—ã –¥–ª—è –∑–∞—è–≤–æ–∫
- [x] –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ approve/reject –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –∑–∞—è–≤–æ–∫
- [x] **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ –≤ `CH_INTAKE_QUEUE`** ‚úÖ
  - –†–∞—Å—à–∏—Ä–µ–Ω `IntakeService.submitApplication()` –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∫–∞—Ä—Ç–æ—á–∫–∏
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `DiscordGateway.ensureMessageWithEmbed()` —Å `messageKey = application:<applicationId>`
  - –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç: mention –∞–≤—Ç–æ—Ä–∞, –∫–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è, –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `intakeRenderer.ts` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ embed
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ mapping —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ë–î –¥–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- [x] **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞—è–≤–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** ‚úÖ
  - –ü—Ä–∏ approve/reject –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –≤ `CH_INTAKE_QUEUE`
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `DiscordGateway.updateMessage()` –ø–æ `messageKey`
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ embed —Å –Ω–æ–≤—ã–º —Å—Ç–∞—Ç—É—Å–æ–º –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ä–µ—à–µ–Ω–∏–∏
  - Graceful degradation: –æ—à–∏–±–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å

#### 1.4. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ‚úÖ
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ `BASE_GUEST` –¥–ª—è `/intake apply`
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π `BASE_STAFF`/`BASE_COMMAND` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞/—Ä–µ—à–µ–Ω–∏–π
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `interactionRouter.ts` (—Ñ—É–Ω–∫—Ü–∏–∏ `mustHaveRole()`, `mustHaveAnyRole()`)

#### 1.5. Audit Log –≤ Discord ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û
- [x] –ó–∞–ø–∏—Å—å —Å–æ–±—ã—Ç–∏–π –≤ –ë–î: `ApplicationCreated`, `ApplicationSubmitted`, `ApplicationApproved`, `ApplicationRejected`, `ApplicationCancelled`
- [x] **–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π intake –≤ –∫–∞–Ω–∞–ª `CH_AUDIT`** ‚úÖ
  - –°–æ–∑–¥–∞–Ω `AuditLogService` (`src/infra/audit/auditLogService.ts`)
  - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å `DiscordGateway` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ `CH_AUDIT`
  - –§–æ—Ä–º–∞—Ç: embed —Å —Ç–∏–ø–æ–º —Å–æ–±—ã—Ç–∏—è, —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏, timestamp, —Ü–≤–µ—Ç–æ–º –ø–æ —Ç–∏–ø—É
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–±—ã—Ç–∏–π: `ApplicationSubmitted`, `ApplicationApproved`, `ApplicationRejected`
  - Graceful degradation: –µ—Å–ª–∏ –∫–∞–Ω–∞–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –æ—à–∏–±–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `IntakeService` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π

---

### –≠—Ç–∞–ø 2: Member Role Management (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏) ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –í–´–°–û–ö–ò–ô üî¥ ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (rank, position, clearance).

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (2024-12-20)

#### 2.1. Storage Layer (–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞) ‚úÖ
- [x] **–°–æ–∑–¥–∞–Ω `MemberRepository`** (`src/infra/storage/sqlite/repositories/memberRepository.ts`)
  - [x] `getMemberProfile(guildId, userId)`: –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Å —Ç–µ–∫—É—â–∏–º–∏ —Ä–æ–ª—è–º–∏ (rank, positions, clearances)
  - [x] `upsertMember()`: —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
  - [x] `updateMemberRank(guildId, userId, rankRoleKey | null)`: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–≤–∞–Ω–∏—è
  - [x] `addMemberPosition(guildId, userId, positionRoleKey)`: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
  - [x] `removeMemberPosition(guildId, userId, positionRoleKey)`: —É–¥–∞–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏
  - [x] `addMemberClearance(guildId, userId, clearanceRoleKey)`: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø—É—Å–∫–∞
  - [x] `removeMemberClearance(guildId, userId, clearanceRoleKey)`: —É–¥–∞–ª–µ–Ω–∏–µ –¥–æ–ø—É—Å–∫–∞
  - [x] –ú–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å JSON –ø–æ–ª—è–º–∏ –¥–ª—è positions/clearances (–º–∞—Å—Å–∏–≤—ã)
  - [x] –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
  - [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `sqliteStorage.ts`

#### 2.2. Domain Layer (–ü–æ–ª–∏—Ç–∏–∫–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è) ‚úÖ
- [x] **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–æ–ª–µ–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ Application Layer**
  - [x] –í–∞–ª–∏–¥–∞—Ü–∏—è: –º–∞–∫—Å–∏–º—É–º 1 rank –Ω–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞
  - [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è `rankRoleKey` –≤ —à–∞–±–ª–æ–Ω–µ –∏ —Ç–∏–ø–∞ `type=rank`
  - [x] –í–∞–ª–∏–¥–∞—Ü–∏—è –ª–∏–º–∏—Ç–∞ positions (–º–∞–∫—Å–∏–º—É–º 2 positions)
  - [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ä–æ–ª–∏ `type=position` –∏ `type=clearance`
  - [x] –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ TemplateRegistry —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ –≥–∏–ª—å–¥–∏–∏

#### 2.3. Application Layer (Use-cases) ‚úÖ
- [x] **–°–æ–∑–¥–∞–Ω `MemberRoleManagementService`** (`src/app/services/memberRoleManagementService.ts`)
  - [x] `setRank(ctx, targetUserId, rankRoleKey | null)` ‚úÖ
    - –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ TemplateRegistry (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ rank)
    - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ rank —á–µ—Ä–µ–∑ `MemberRepository`
    - –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ rank —á–µ—Ä–µ–∑ `DiscordGateway` (–µ—Å–ª–∏ –µ—Å—Ç—å)
    - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ rank (–µ—Å–ª–∏ –Ω–µ null)
    - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î —á–µ—Ä–µ–∑ `MemberRepository`
    - Audit —Å–æ–±—ã—Ç–∏–µ `MemberRankSet` (–≤ –ë–î –∏ CH_AUDIT)
  - [x] `addPosition(ctx, targetUserId, positionRoleKey)` ‚úÖ
    - –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ TemplateRegistry (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ position)
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ —á–µ—Ä–µ–∑ `MemberRepository.getMemberProfile()` (–º–∞–∫—Å–∏–º—É–º 2)
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–∞ (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
    - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–∏ —á–µ—Ä–µ–∑ `DiscordGateway`
    - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î
    - Audit —Å–æ–±—ã—Ç–∏–µ `MemberPositionAdded` (–≤ –ë–î –∏ CH_AUDIT)
  - [x] `removePosition(ctx, targetUserId, positionRoleKey)` ‚úÖ
    - –£–¥–∞–ª–µ–Ω–∏–µ —Ä–æ–ª–∏ —á–µ—Ä–µ–∑ `DiscordGateway`
    - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î
    - Audit —Å–æ–±—ã—Ç–∏–µ `MemberPositionRemoved` (–≤ –ë–î –∏ CH_AUDIT)
  - [x] `grantClearance(ctx, targetUserId, clearanceRoleKey)` ‚úÖ
    - –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ TemplateRegistry (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ clearance)
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–∞
    - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–∏ —á–µ—Ä–µ–∑ `DiscordGateway`
    - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î
    - Audit —Å–æ–±—ã—Ç–∏–µ `MemberClearanceGranted` (–≤ –ë–î –∏ CH_AUDIT)
  - [x] `revokeClearance(ctx, targetUserId, clearanceRoleKey)` ‚úÖ
    - –£–¥–∞–ª–µ–Ω–∏–µ —Ä–æ–ª–∏ —á–µ—Ä–µ–∑ `DiscordGateway`
    - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î
    - Audit —Å–æ–±—ã—Ç–∏–µ `MemberClearanceRevoked` (–≤ –ë–î –∏ CH_AUDIT)
  - [x] `getMemberProfile(ctx, userId)`: –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è —Å —Ä–æ–ª—è–º–∏ ‚úÖ

#### 2.4. Discord Gateway —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è ‚úÖ
- [x] **–ú–µ—Ç–æ–¥—ã `DiscordGateway` —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã** (`src/infra/discord/discordGateway.ts`)
  - [x] `addRoleToMember()` ‚Äî –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫—É
  - [x] `removeRoleFromMember()` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —Ä–æ–ª–∏ —É —É—á–∞—Å—Ç–Ω–∏–∫–∞
  - [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: —Ä–æ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, —É—á–∞—Å—Ç–Ω–∏–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω, –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –±–æ—Ç–∞
  - [x] –ú–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ `MemberRoleManagementService`

#### 2.5. Interface Layer (–ö–æ–º–∞–Ω–¥—ã Discord) ‚úÖ
- [x] **–î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã –≤ `commandDefinitions.ts`**
  - [x] `/roles set-rank user:<User> rank:<String|Autocomplete>` ‚úÖ
    - Autocomplete –¥–ª—è —Ä–∞–Ω–≥–æ–≤ –∏–∑ —à–∞–±–ª–æ–Ω–∞ (—Ç–æ–ª—å–∫–æ `type=rank`) + –æ–ø—Ü–∏—è "–°–Ω—è—Ç—å –∑–≤–∞–Ω–∏–µ"
  - [x] `/roles add-position user:<User> position:<String|Autocomplete>` ‚úÖ
    - Autocomplete –¥–ª—è –¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π –∏–∑ —à–∞–±–ª–æ–Ω–∞ (—Ç–æ–ª—å–∫–æ `type=position`)
  - [x] `/roles remove-position user:<User> position:<String|Autocomplete>` ‚úÖ
  - [x] `/roles grant-clearance user:<User> clearance:<String|Autocomplete>` ‚úÖ
    - Autocomplete –¥–ª—è –¥–æ–ø—É—Å–∫–æ–≤ –∏–∑ —à–∞–±–ª–æ–Ω–∞ (—Ç–æ–ª—å–∫–æ `type=clearance`)
  - [x] `/roles revoke-clearance user:<User> clearance:<String|Autocomplete>` ‚úÖ
  - [x] `/roles profile user:<User>` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–∞ ‚úÖ
- [x] **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `interactionRouter.ts`** ‚úÖ
  - [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ —á–µ—Ä–µ–∑ `MemberRoleManagementService`
  - [x] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
    - [x] `set-rank`: —Ç–æ–ª—å–∫–æ `BASE_COMMAND` –∏–ª–∏ ownerId
    - [x] `add-position`, `remove-position`, `grant-clearance`, `revoke-clearance`: `BASE_STAFF` –∏–ª–∏ `BASE_COMMAND` –∏–ª–∏ ownerId
    - [x] `profile`: –±–µ–∑ –æ—Å–æ–±—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (–ø—Ä–æ—Å–º–æ—Ç—Ä)
  - [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ autocomplete –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–µ–π –∏–∑ —à–∞–±–ª–æ–Ω–∞ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É —Ä–æ–ª–∏)
  - [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–æ–∑–≤—Ä–∞—Ç –ø–æ–Ω—è—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

#### 2.6. UI Renderers (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è MVP)
- [ ] **–°–æ–∑–¥–∞—Ç—å `memberRoleRenderer.ts`** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - Embed –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–∞ —Å —Ä–æ–ª—è–º–∏
  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ positions/clearances

#### 2.7. Audit Log ‚úÖ
- [x] **–†–∞—Å—à–∏—Ä–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ audit —Å–æ–±—ã—Ç–∏–π**
  - [x] –°–æ–±—ã—Ç–∏—è: `MemberRankSet`, `MemberPositionAdded`, `MemberPositionRemoved`, `MemberClearanceGranted`, `MemberClearanceRevoked`
  - [x] –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ `CH_AUDIT` —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏: –∫—Ç–æ, –∫–æ–º—É, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª, timestamp
  - [x] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—Ç –∂–µ –º–µ—Ö–∞–Ω–∏–∑–º, —á—Ç–æ –¥–ª—è intake —Å–æ–±—ã—Ç–∏–π
  - [x] Embed'—ã —Å —Ü–≤–µ—Ç–∞–º–∏: –∑–µ–ª—ë–Ω—ã–π –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è, –∂—ë–ª—Ç—ã–π –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è

---

### –≠—Ç–∞–ø 3: Discipline (–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞) ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –°–†–ï–î–ù–ò–ô üü°

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π.

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** Storage –¥–ª—è discipline_records —É–∂–µ –µ—Å—Ç—å, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ UI.

#### 3.1. Storage Layer
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å `DisciplineRepository`** (–µ—Å–ª–∏ –µ—Å—Ç—å) –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å (`src/infra/storage/sqlite/repositories/disciplineRepository.ts`)
  - `addRecord(guildId, recordId, targetUserId, authorUserId, kind, severity, reason, expiresAt?)`
  - `listRecords(guildId, targetUserId, limit?, filters?)`
  - `getRecord(guildId, recordId)`
  - `revokeRecord(guildId, recordId, reason, authorUserId)` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è MVP)

#### 3.2. Application Layer (Use-cases)
- [ ] **–°–æ–∑–¥–∞—Ç—å `DisciplineService`** (`src/app/services/disciplineService.ts`)
  - `addRecord(guildId, actorUserId, targetUserId, kind, severity, reason, expiresAt?)`
    - –í–∞–ª–∏–¥–∞—Ü–∏—è: `kind` ‚àà {`note`, `warning`}, `severity` ‚àà [1..5], `reason` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
    - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è `recordId` (UUID)
    - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `DisciplineRepository`
    - Audit —Å–æ–±—ã—Ç–∏–µ `DisciplineRecordAdded`
    - –í–æ–∑–≤—Ä–∞—Ç —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏
  - `listRecords(guildId, targetUserId, limit=20)`
    - –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π —á–µ—Ä–µ–∑ `DisciplineRepository`
    - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∞–∫—Ç–∏–≤–Ω—ã–º (–µ—Å–ª–∏ `expiresAt` –∑–∞–¥–∞–Ω –∏ –Ω–µ –ø—Ä–æ—à—ë–ª)
    - –ê–≥—Ä–µ–≥–∞—Ü–∏—è: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ active warnings, –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã
    - –í–æ–∑–≤—Ä–∞—Ç —Å–ø–∏—Å–∫–∞ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
  - `revokeRecord(guildId, recordId, reason, actorUserId)` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è MVP)
    - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ `kind=revocation` (append-only –ø–æ–¥—Ö–æ–¥)
    - Audit —Å–æ–±—ã—Ç–∏–µ `DisciplineRecordRevoked`
    - –í MVP –º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å, –µ—Å–ª–∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ

#### 3.3. Interface Layer (–ö–æ–º–∞–Ω–¥—ã Discord)
- [ ] **–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ `commandDefinitions.ts`**
  - `/discipline add user:<User> kind:<String|Choices:note|warning> severity:<Integer|Min:1|Max:5> reason:<String> expires_at:<String|Optional>`
    - `expires_at` –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO 8601 –∏–ª–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "7d", "1w")
  - `/discipline list user:<User> limit:<Integer|Min:1|Max:100|Optional>`
- [ ] **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `interactionRouter.ts`**
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ —á–µ—Ä–µ–∑ `DisciplineService`
  - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: —Ç–æ–ª—å–∫–æ `BASE_STAFF`, `BASE_COMMAND` –∏–ª–∏ ownerId
  - –ü–∞—Ä—Å–∏–Ω–≥ `expires_at` –≤ Date –æ–±—ä–µ–∫—Ç
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### 3.4. UI Renderers
- [ ] **–°–æ–∑–¥–∞—Ç—å `disciplineRenderer.ts`** (`src/interface/discord/render/disciplineRenderer.ts`)
  - `renderDisciplineRecord(record)`: embed –¥–ª—è –æ–¥–Ω–æ–π –∑–∞–ø–∏—Å–∏
    - –¶–≤–µ—Ç –ø–æ severity: 1-2 (–∑–µ–ª—ë–Ω—ã–π), 3 (–∂—ë–ª—Ç—ã–π), 4-5 (–∫—Ä–∞—Å–Ω—ã–π)
    - –≠–º–æ–¥–∑–∏ –ø–æ —Ç–∏–ø—É: note (üìù), warning (‚ö†Ô∏è)
    - –ü–æ–ª—è: –∞–≤—Ç–æ—Ä, —Ü–µ–ª—å, —Ç–∏–ø, severity, –ø—Ä–∏—á–∏–Ω–∞, –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è, —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
  - `renderDisciplineList(records, targetUser)`: embed –¥–ª—è —Å–ø–∏—Å–∫–∞ –∑–∞–ø–∏—Å–µ–π
    - –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å mention —Ü–µ–ª–µ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    - –°–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø–∏—Å–µ–π (–¥–æ –ª–∏–º–∏—Ç–∞)
    - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ active warnings
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `interactionRouter.ts` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–æ–º–∞–Ω–¥

#### 3.5. Audit Log
- [ ] **–†–∞—Å—à–∏—Ä–∏—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ audit —Å–æ–±—ã—Ç–∏–π**
  - –°–æ–±—ã—Ç–∏—è: `DisciplineRecordAdded`, `DisciplineRecordRevoked` (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
  - –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ `CH_AUDIT` —Å –∫—Ä–∞—Ç–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π: –∫—Ç–æ, –∫–æ–º—É, —Ç–∏–ø, severity
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ –º–µ—Ö–∞–Ω–∏–∑–º, —á—Ç–æ –¥–ª—è intake –∏ roles —Å–æ–±—ã—Ç–∏–π

---

### –≠—Ç–∞–ø 4: Audit Log –≤ Discord –∫–∞–Ω–∞–ª ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –í–´–°–û–ö–ò–ô üî¥

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ audit —Å–æ–±—ã—Ç–∏–π –≤ –∫–∞–Ω–∞–ª `CH_AUDIT`.

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã (Intake, MemberRoleManagement, Discipline) –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –º–µ—Ö–∞–Ω–∏–∑–º.

#### 4.1. Infrastructure Layer
- [ ] **–°–æ–∑–¥–∞—Ç—å `AuditLogService`** (`src/infra/audit/auditLogService.ts`) –∏–ª–∏ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
  - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ—Ä—Ç–∞: `AuditLogPort` (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
  - –ú–µ—Ç–æ–¥ `publishEvent(guildId, eventType, payload)`
    - –ü–æ–ª—É—á–µ–Ω–∏–µ `CH_AUDIT` channelId —á–µ—Ä–µ–∑ `MappingRepository` –ø–æ –∫–ª—é—á—É `CH_AUDIT`
    - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è embed —Å –¥–∞–Ω–Ω—ã–º–∏ —Å–æ–±—ã—Ç–∏—è
    - –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ `DiscordGateway.sendMessage()`
    - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: –∫–∞–Ω–∞–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤
  - –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π: enum –∏–ª–∏ const —Å —Ç–∏–ø–∞–º–∏
    - Intake: `ApplicationSubmitted`, `ApplicationApproved`, `ApplicationRejected`
    - Roles: `MemberRankSet`, `MemberPositionAdded`, `MemberPositionRemoved`, `MemberClearanceGranted`, `MemberClearanceRevoked`
    - Discipline: `DisciplineRecordAdded`, `DisciplineRecordRevoked`
    - Deploy: `DeploymentStarted`, `DeploymentCompleted`, `DeploymentFailed`

#### 4.2. Audit Event Renderer
- [ ] **–°–æ–∑–¥–∞—Ç—å `auditEventRenderer.ts`** (`src/interface/discord/render/auditEventRenderer.ts`)
  - `renderAuditEvent(eventType, payload)`: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è embed –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π
  - –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç: –∑–∞–≥–æ–ª–æ–≤–æ–∫ (—Ç–∏–ø —Å–æ–±—ã—Ç–∏—è), –ø–æ–ª—è (—É—á–∞—Å—Ç–Ω–∏–∫–∏, –¥–µ—Ç–∞–ª–∏), timestamp, —Ü–≤–µ—Ç –ø–æ —Ç–∏–ø—É
  - –ü—Ä–∏–º–µ—Ä—ã:
    - Intake: "–ó–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞", mention –∑–∞—è–≤–∏—Ç–µ–ª—è –∏ –æ–¥–æ–±—Ä–∏–≤—à–µ–≥–æ, reason (–µ—Å–ª–∏ –µ—Å—Ç—å)
    - Roles: "–ó–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–æ", mention —Ü–µ–ª–µ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è, —Å—Ç–∞—Ä–æ–µ/–Ω–æ–≤–æ–µ –∑–≤–∞–Ω–∏–µ
    - Discipline: "–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω–∞—è –∑–∞–ø–∏—Å—å", mention —Ü–µ–ª–µ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∞–≤—Ç–æ—Ä–∞, —Ç–∏–ø –∏ severity

#### 4.3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- [ ] **–û–±–Ω–æ–≤–∏—Ç—å `IntakeService`**
  - –í—ã–∑–æ–≤ `AuditLogService.publishEvent()` –ø–æ—Å–ª–µ `approveApplication()` –∏ `rejectApplication()`
- [ ] **–û–±–Ω–æ–≤–∏—Ç—å `MemberRoleManagementService`** (–ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è)
  - –í—ã–∑–æ–≤ `AuditLogService.publishEvent()` –ø–æ—Å–ª–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ä–æ–ª—è–º–∏
- [ ] **–û–±–Ω–æ–≤–∏—Ç—å `DisciplineService`** (–ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è)
  - –í—ã–∑–æ–≤ `AuditLogService.publishEvent()` –ø–æ—Å–ª–µ `addRecord()`

#### 4.4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [ ] Graceful degradation: –µ—Å–ª–∏ `CH_AUDIT` –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É, –Ω–æ –Ω–µ –ø–∞–¥–∞—Ç—å
- [ ] –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –∫–∞–Ω–∞–ª –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∞ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥ (feature flag)

---

### –≠—Ç–∞–ø 5: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Deploy ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ù–ò–ó–ö–ò–ô üü¢

**–¶–µ–ª—å:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è—Ö.

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏, –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è MVP. –ú–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å –Ω–∞ –§–∞–∑—É 2.

#### 5.1. DeployDiagnoseService
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `diagnose()`: –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π
  - –†–æ–ª–∏/–∫–∞–Ω–∞–ª—ã, —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤ Discord, –Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ mappings
  - –†–æ–ª–∏/–∫–∞–Ω–∞–ª—ã, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ Discord, –Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤ mappings
  - –ò–∑–º–µ–Ω–µ–Ω–∏—è fingerprint –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è mappings
  - –í–æ–∑–≤—Ä–∞—Ç –æ—Ç—á—ë—Ç–∞ —Å –¥–µ—Ç–∞–ª—è–º–∏ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–π

#### 5.2. DeployRepairService
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `repair()`: –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
  - Reconciliation: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ mappings –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
  - Adoption: –ø—Ä–∏–Ω—è—Ç–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ Discord –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
  - Cleanup: —É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)
  - Preview –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º

#### 5.3. –ö–æ–º–∞–Ω–¥—ã Deploy (Interface Layer)
- [ ] –î–æ–±–∞–≤–∏—Ç—å `/deploy diagnose` —Å –æ—Ç—á—ë—Ç–æ–º –æ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å `/deploy repair` —Å preview –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º

---

### –≠—Ç–∞–ø 6: –£–ª—É—á—à–µ–Ω–∏—è –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ù–ò–ó–ö–ò–ô üü¢

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–∏ –∑–∞–¥–∞—á–∏ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —ç—Ç–∞–ø–∞–º–∏ –∏–ª–∏ –æ—Ç–ª–æ–∂–∏—Ç—å –Ω–∞ –§–∞–∑—É 2.

#### 6.1. –£–ª—É—á—à–µ–Ω–∏–µ UI
- [ ] –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤ (intake, discipline)
  - –ö–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"/"–í–ø–µ—Ä—ë–¥" –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ –∑–∞—è–≤–æ–∫ –∏ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- [ ] –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–æ–ª–µ–π/–¥–æ–ª–∂–Ω–æ—Å—Ç–µ–π
  - StringSelectMenu –≤–º–µ—Å—Ç–æ autocomplete –¥–ª—è –∫–æ–º–∞–Ω–¥ roles (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- [ ] –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
  - –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ä–æ–ª—è–º–∏ (set-rank, remove-position)

#### 6.2. –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- [ ] –ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –æ—à–∏–±–æ–∫ Discord API
  - –†–∞—Å—à–∏—Ä–∏—Ç—å `AppError` —Å —Ç–∏–ø–∞–º–∏ –æ—à–∏–±–æ–∫ Discord (rate limit, permission denied, not found, etc.)
- [ ] Retry –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
  - –†–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ retry –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫ –≤ `RateLimitQueue`

#### 6.3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Unit-—Ç–µ—Å—Ç—ã –¥–ª—è domain-–ø–æ–ª–∏—Ç–∏–∫
  - –¢–µ—Å—Ç—ã –¥–ª—è `RankPolicy`, `PositionPolicy`, `ClearancePolicy`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è use-cases (—Å –º–æ–∫–∞–º–∏)
  - –¢–µ—Å—Ç—ã –¥–ª—è `MemberRoleManagementService`, `DisciplineService` —Å –º–æ–∫–∞–º–∏ –ø–æ—Ä—Ç–æ–≤

---

## üìÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. **–≠—Ç–∞–ø 1 (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π)**: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ Intake ‚Äî –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –∫–∞–Ω–∞–ª –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ (~1-2 –¥–Ω—è)
2. **–≠—Ç–∞–ø 4 (–í—ã—Å–æ–∫–∏–π)**: Audit Log –≤ Discord –∫–∞–Ω–∞–ª ‚Äî –µ–¥–∏–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π (~1 –¥–µ–Ω—å)
3. **–≠—Ç–∞–ø 2 (–í—ã—Å–æ–∫–∏–π)**: Member Role Management ‚Äî –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ (~3-5 –¥–Ω–µ–π)
4. **–≠—Ç–∞–ø 3 (–°—Ä–µ–¥–Ω–∏–π)**: Discipline ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ UI (~2-3 –¥–Ω—è)
5. **–≠—Ç–∞–ø 5-6 (–ù–∏–∑–∫–∏–π)**: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —É–ª—É—á—à–µ–Ω–∏—è ‚Äî –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–ª–∏ –≤ –§–∞–∑–µ 2

**–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è MVP:** 7-11 –¥–Ω–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è MVP

MVP —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–º, –∫–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –≤—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ **–≠—Ç–∞–ø–æ–≤ 1-3** –∏ **–≠—Ç–∞–ø 4**:

- ‚úÖ Intake –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç: –∑–∞—è–≤–∫–∏ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ –∫–∞–Ω–∞–ª, —Å—Ç–∞—Ç—É—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ Audit Log –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ Discord –∫–∞–Ω–∞–ª –¥–ª—è —Å–æ–±—ã—Ç–∏–π Intake
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç: –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã `/roles` —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç, –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è
- ‚ùå –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–µ–π —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã `/discipline`
- ‚úÖ Audit Log –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ Discord –∫–∞–Ω–∞–ª –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π (roles –∏ intake)

### üìä –ü—Ä–æ–≥—Ä–µ—Å—Å MVP: ~85% –∑–∞–≤–µ—Ä—à–µ–Ω–æ

**–ó–∞–≤–µ—Ä—à–µ–Ω–æ:**
- ‚úÖ Setup Wizard –∏ –¥–µ–ø–ª–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ Intake (–ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Discord –∫–∞–Ω–∞–ª–∞–º–∏)
- ‚úÖ Audit Log (–º–µ—Ö–∞–Ω–∏–∑–º –≥–æ—Ç–æ–≤, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –¥–ª—è Intake –∏ Roles)
- ‚úÖ Member Role Management (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤)

**–û—Å—Ç–∞–ª–æ—Å—å:**
- ‚è≥ Discipline (–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω—ã–µ –∑–∞–ø–∏—Å–∏)

---

## üìã –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è MVP

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- [x] Setup Wizard —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é
- [x] –î–µ–ø–ª–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ
- [x] Intake (–ø—Ä–∏—ë–º–Ω–∞—è) —Ä–∞–±–æ—Ç–∞–µ—Ç: –∑–∞—è–≤–∫–∏, —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ, –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –∫–∞–Ω–∞–ª ‚úÖ
- [x] Audit Log –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ Discord –∫–∞–Ω–∞–ª –¥–ª—è —Å–æ–±—ã—Ç–∏–π Intake –∏ Roles ‚úÖ
- [x] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç: rank, position, clearance ‚úÖ
- [ ] –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π, –ø—Ä–æ—Å–º–æ—Ç—Ä

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- [x] –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏–∑ `commands-mvp.md` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (—á–∞—Å—Ç–∏—á–Ω–æ ‚Äî –æ—Å—Ç–∞–ª–∞—Å—å —Ç–æ–ª—å–∫–æ discipline)
- [x] Audit log –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ Discord –∫–∞–Ω–∞–ª –¥–ª—è —Å–æ–±—ã—Ç–∏–π Intake (–∑–∞–ø–∏—Å—å –≤ –ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π) ‚úÖ
- [x] –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (graceful degradation –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ –∫–∞–Ω–∞–ª—ã)
- [x] Rate limiting —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö Discord –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–∑—ã (–ø–æ—Å–ª–µ MVP)

### –§–∞–∑–∞ 2: –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π preview/diff –¥–µ–ø–ª–æ—è
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (diagnose/repair)
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ—á–Ω—ã—Ö –ø—Ä–∞–≤
- –ú–µ—Ç—Ä–∏–∫–∏ –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞

### –§–∞–∑–∞ 3: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã
- –ú—É–ª—å—Ç–∏-—é–Ω–∏—Ç –Ω–∞ –æ–¥–Ω–æ–º guild
- –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Postgres
- –ú–æ–¥—É–ª—å —É—á—ë—Ç–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫/–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

